{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"campaign_analize\"\n};\nvar _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"flex justify-between items-center\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"text-white text-left ml-4 text-sm\"\n}, \" データベースの中身を参照・更新することができます。現状作成・削除の機能はありません。 \")], -1 /* HOISTED */);\nvar _hoisted_3 = {\n  \"class\": \"flex justify-left items-center py-5\"\n};\nvar _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"text-white text-left ml-4 text-sm\"\n}, \"操作対象テーブル：\", -1 /* HOISTED */);\nvar _hoisted_5 = [\"value\"];\nvar _hoisted_6 = {\n  \"class\": \"m-4 p-2\"\n};\nexport function render(_ctx, _cache) {\n  var _component_SideVar = _resolveComponent(\"SideVar\");\n  var _component_PageTitle = _resolveComponent(\"PageTitle\");\n  var _component_EasyDataTable = _resolveComponent(\"EasyDataTable\");\n  var _component_RightColumnOutline = _resolveComponent(\"RightColumnOutline\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" side var  \"), _createVNode(_component_SideVar), _createCommentVNode(\" main div \"), _createVNode(_component_RightColumnOutline, null, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_PageTitle, null, {\n        \"default\": _withCtx(function () {\n          return [_createTextVNode(\"Table View\")];\n        }),\n        _: 1 /* STABLE */\n      }), _hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"select\", {\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n          return _ctx.selectedTable = $event;\n        })\n      }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.optionTables, function (table) {\n        return _openBlock(), _createElementBlock(\"option\", {\n          value: table.name,\n          key: table.id\n        }, _toDisplayString(table.name), 9 /* TEXT, PROPS */, _hoisted_5);\n      }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, _ctx.selectedTable]])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_EasyDataTable, {\n        headers: _ctx.headers,\n        items: _ctx.items,\n        \"sort-by\": _ctx.sortBy,\n        \"sort-type\": _ctx.sortType\n      }, null, 8 /* PROPS */, [\"headers\", \"items\", \"sort-by\", \"sort-type\"])])];\n    }),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"mappings":";;;EACO,SAAM;AAAkB;8BAMzBA,oBAIM;EAJD,SAAM;AAAmC,iBAC5CA,oBAEM;EAFD,SAAM;AAAmC,GAAC,8CAE/C;;EAEG,SAAM;AAAqC;8BAC9CA,oBAA8D;EAAzD,SAAM;AAAmC,GAAC,WAAS;;;EAWrD,SAAM;AAAS;;;;;;uBAvBxBC,oBAgCM,OAhCNC,UAgCM,GA/BJC,kCAAkB,EAClBC,aAAWC,qBACXF,iCAAiB,EACjBC,aA2BqBE;wBA1BnB;MAAA,OAAiC,CAAjCF,aAAiCG;4BAAtB;UAAA,OAAU,kBAAV,YAAU;;;UACrBC,UAIM,EACNR,oBAWM,OAXNS,UAWM,GAVJC,UAA8D,kBAC9DV,oBAQS;;iBARQW,kBAAa;QAAA;6BAC5BV,oBAMSW,6BALSD,iBAAY,YAArBE,KAAK;6BADdZ,oBAMS;UAJAa,KAAK,EAAED,KAAK,CAACE,IAAI;UACjBC,GAAG,EAAEH,KAAK,CAACI;4BAEfJ,KAAK,CAACE,IAAI;+EANAJ,kBAAa,OAUhCX,oBAOM,OAPNkB,UAOM,GANJd,aAKEe;QAJCC,OAAO,EAAET,YAAO;QAChBU,KAAK,EAAEV,UAAK;QACZ,SAAO,EAAEA,WAAM;QACf,WAAS,EAAEA","names":["_createElementVNode","_createElementBlock","_hoisted_1","_createCommentVNode","_createVNode","_component_SideVar","_component_RightColumnOutline","_component_PageTitle","_hoisted_2","_hoisted_3","_hoisted_4","_ctx","_Fragment","table","value","name","key","id","_hoisted_6","_component_EasyDataTable","headers","items"],"sourceRoot":"","sources":["/Users/kazuaki.aihara/Documents/hanabi-admin/src/views/TableView.vue"],"sourcesContent":["<template>\n  <div class=\"campaign_analize\">\n    <!-- side var  -->\n    <SideVar />\n    <!-- main div -->\n    <RightColumnOutline>\n      <PageTitle>Table View</PageTitle>\n      <div class=\"flex justify-between items-center\">\n        <div class=\"text-white text-left ml-4 text-sm\">\n          データベースの中身を参照・更新することができます。現状作成・削除の機能はありません。\n        </div>\n      </div>\n      <div class=\"flex justify-left items-center py-5\">\n        <div class=\"text-white text-left ml-4 text-sm\">操作対象テーブル：</div>\n        <select v-model=\"selectedTable\">\n          <option\n            v-for=\"table in optionTables\"\n            v-bind:value=\"table.name\"\n            v-bind:key=\"table.id\"\n          >\n            {{ table.name }}\n          </option>\n        </select>\n      </div>\n      <div class=\"m-4 p-2\">\n        <EasyDataTable\n          :headers=\"headers\"\n          :items=\"items\"\n          :sort-by=\"sortBy\"\n          :sort-type=\"sortType\"\n        />\n      </div>\n    </RightColumnOutline>\n  </div>\n</template>\n\n<script>\nimport api from \"../api/api.js\";\nimport { ref, onMounted } from \"vue\";\n\nexport default {\n  name: \"tableView\",\n  components: {},\n  setup() {\n    const sortBy = \"event_id\";\n    const sortType = \"asc\";\n    const headers = [\n      { text: \"event_id\", value: \"event_id\", sortable: true },\n      {\n        text: \"theme\",\n        value: \"theme\",\n        sortable: true,\n      },\n      {\n        text: \"states\",\n        value: \"states\",\n        sortable: true,\n      },\n      { text: \"area\", value: \"area\", sortable: true },\n      { text: \"start_at\", value: \"start_at\", sortable: true },\n      { text: \"name\", value: \"name\", sortable: true },\n      { text: \"status\", value: \"status\", sortable: true },\n\n      { text: \"states\", value: \"states\", sortable: true },\n      { text: \"payment_ratio\", value: \"payment_ratio\", sortable: true },\n      {\n        text: \"male_estimated_payment\",\n        value: \"male_estimated_payment\",\n        sortable: true,\n      },\n      {\n        text: \"female_estimated_payment\",\n        value: \"female_estimated_payment\",\n        sortable: true,\n      },\n      {\n        text: \"message_from_owner\",\n        value: \"message_from_owner\",\n        sortable: true,\n      },\n      { text: \"owner_user_id\", value: \"owner_user_id\", sortable: true },\n      {\n        text: \"participants_pattern\",\n        value: \"participants_pattern\",\n        sortable: true,\n      },\n      { text: \"restaurant_url\", value: \"restaurant_url\", sortable: true },\n      {\n        text: \"male_participants_number\",\n        value: \"male_participants_number\",\n        sortable: true,\n      },\n      {\n        text: \"female_participants_number\",\n        value: \"female_participants_number\",\n        sortable: true,\n      },\n      { text: \"deleted_at\", value: \"deleted_at\", sortable: true },\n      { text: \"created_at\", value: \"created_at\", sortable: true },\n      { text: \"updated_at\", value: \"updated_at\", sortable: true },\n    ];\n\n    let items = ref([]);\n\n    onMounted(() => {});\n    return {\n      headers,\n      items,\n      sortBy,\n      sortType,\n    };\n  },\n  mounted() {\n    this.show_flag = true;\n  },\n  watch: {\n    selectedTable: function(newVal, oldVal){\n      handler() {\n        switch()\n        this.dailycountSeries = [];\n        this.getDiscordSummary();\n      },\n      deep: true,\n    },\n  },\n  data() {\n    return {\n      show_flag: false,\n      selectedTable: \"events\",\n      optionTables: [\n        { id: 1, name: \"events\" },\n        { id: 2, name: \"users\" },\n        { id: 3, name: \"age_verifications\" },\n        { id: 4, name: \"user_photos\" },\n        { id: 5, name: \"chat_rooms\" },\n        { id: 6, name: \"chat_room_user\" },\n        { id: 7, name: \"friends\" },\n        { id: 8, name: \"messages\" },\n        { id: 9, name: \"areas\" },\n        { id: 10, name: \"theme\" },\n        { id: 11, name: \"participants\" },\n        { id: 12, name: \"user_opinions\" },\n        { id: 13, name: \"blocks\" },\n      ],\n    };\n  },\n  computed: {},\n  methods: {\n    getDiscordChannels() {\n      api\n        .getDiscordChannels({\n          data_from: this.date[0].toISOString().slice(0, 10),\n          data_to: this.date[1].toISOString().slice(0, 10),\n        })\n        .then((response) => {\n          console.log(response);\n          for (let i = 0; i < response[\"data\"].length; i++) {\n            this.items.push({\n              channel_name: response[\"data\"][i][\"channel_name\"],\n              count_actions:\n                response[\"data\"][i][\"count_messages\"] +\n                response[\"data\"][i][\"count_reactions\"],\n              count_messages: response[\"data\"][i][\"count_messages\"],\n              count_reactions: response[\"data\"][i][\"count_reactions\"],\n              count_message_users: response[\"data\"][i][\"count_message_users\"],\n              count_reaction_users: response[\"data\"][i][\"count_reaction_users\"],\n            });\n          }\n        })\n        .catch(() => {\n          this.$toast.show(\"分析データの取得に失敗しました\", {\n            type: \"error\",\n            position: \"top-right\",\n            duration: 5000,\n          });\n        });\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}