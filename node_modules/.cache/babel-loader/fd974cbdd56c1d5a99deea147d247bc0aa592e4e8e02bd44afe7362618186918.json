{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { createElementVNode as _createElementVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"SignIn_page\"\n};\nvar _hoisted_2 = {\n  \"class\": \"relative pt-12\"\n};\nvar _hoisted_3 = {\n  \"class\": \"container px-4 mx-auto\"\n};\nvar _hoisted_4 = {\n  \"class\": \"h-full\"\n};\nvar _hoisted_5 = {\n  \"class\": \"relative max-w-xs mx-auto text-center\"\n};\nvar _hoisted_6 = /*#__PURE__*/_createElementVNode(\"a\", {\n  \"class\": \"w-24 inline-block mx-auto mb-10\",\n  href: \"#\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  \"class\": \"block\",\n  src: \"https://sociama-product-image.s3.ap-northeast-1.amazonaws.com/sociama_01@4x.png\",\n  href: \"https://social-marketing.io\"\n})], -1 /* HOISTED */);\nvar _hoisted_7 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  \"class\": \"text-2xl text-gray-500 font-semibold mb-2\"\n}, \" Create your account \", -1 /* HOISTED */);\nvar _hoisted_8 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nvar _hoisted_9 = {\n  \"class\": \"relative w-full h-14 py-4 px-3 mb-8 border border-gray-400 hover:border-blue focus-within:border-green-500 rounded-lg\"\n};\nvar _hoisted_10 = {\n  \"class\": \"absolute bottom-full left-0 ml-3 -mb-1 transform translate-y-0.5 text-xs font-semibold text-gray-600 px-1 bg-gray-200\"\n};\nvar _hoisted_11 = {\n  \"class\": \"pi pi-question-circle m-1\"\n};\nvar _hoisted_12 = {\n  \"class\": \"relative w-full h-14 py-4 px-3 mb-8 border border-gray-400 hover:border-blue focus-within:border-green-500 rounded-lg\"\n};\nvar _hoisted_13 = /*#__PURE__*/_createElementVNode(\"span\", {\n  \"class\": \"absolute bottom-full left-0 ml-3 -mb-1 transform translate-y-0.5 text-xs font-semibold text-gray-600 px-1 bg-gray-200\"\n}, \"Email\", -1 /* HOISTED */);\nvar _hoisted_14 = {\n  \"class\": \"relative w-full h-14 py-4 px-3 mb-6 border border-gray-400 hover:border-blue focus-within:border-green-500 rounded-lg\"\n};\nvar _hoisted_15 = /*#__PURE__*/_createElementVNode(\"span\", {\n  \"class\": \"absolute bottom-full left-0 ml-3 -mb-1 transform translate-y-0.5 text-xs font-semibold text-gray-600 px-1 bg-gray-200\"\n}, \"Password\", -1 /* HOISTED */);\nvar _hoisted_16 = [\"disabled\"];\nvar _hoisted_17 = {\n  key: 0,\n  \"class\": \"pi pi-spin pi-spinner text-sm\"\n};\nvar _hoisted_18 = {\n  \"class\": \"font-medium\"\n};\nvar _hoisted_19 = /*#__PURE__*/_createElementVNode(\"span\", {\n  \"class\": \"text-gray-300\"\n}, \"Do you have any account already? \", -1 /* HOISTED */);\nvar _hoisted_20 = /*#__PURE__*/_createElementVNode(\"a\", {\n  \"class\": \"inline-block text-blue-500 hover:underline\",\n  href: \"#\"\n}, \" Sign in\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = _resolveComponent(\"router-link\");\n  var _directive_tippy = _resolveDirective(\"tippy\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"section\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _hoisted_7, _hoisted_8, _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, [_createTextVNode(\"Organization name / Project name\"), _withDirectives(_createElementVNode(\"i\", _hoisted_11, null, 512 /* NEED_PATCH */), [[_directive_tippy, {\n    content: '当サービスを利用する団体名、プロジェクト名を入力してください'\n  }]])]), _withDirectives(_createElementVNode(\"input\", {\n    \"class\": \"block w-full outline-none bg-transparent text-sm text-gray-600 font-medium\",\n    id: \"signUpInput1\",\n    type: \"text\",\n    placeholder: \"example inc.\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.name = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name]])]), _createElementVNode(\"div\", _hoisted_12, [_hoisted_13, _withDirectives(_createElementVNode(\"input\", {\n    \"class\": \"block w-full outline-none bg-transparent text-sm text-gray-600 font-medium\",\n    id: \"email\",\n    type: \"email\",\n    placeholder: \"mail-address@example.com\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.email = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]])]), _createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _withDirectives(_createElementVNode(\"input\", {\n    \"class\": \"block w-full outline-none bg-transparent text-sm text-gray-600 font-medium\",\n    id: \"password\",\n    type: \"password\",\n    placeholder: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $data.password = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]])]), _createElementVNode(\"button\", {\n    \"class\": _normalizeClass([\"block w-full py-4 mb-4 leading-6 text-white font-semibold rounded-lg transition duration-200\", $data.name != '' && $data.email != '' && $data.password != '' && !$data.loading ? 'bg-blue-500 hover:bg-blue-600' : 'bg-gray-500 hover:bg-gray-600']),\n    disabled: !$data.name || !$data.email || !$data.password || $data.loading,\n    onClick: _cache[3] || (_cache[3] = function () {\n      return $options.signUp && $options.signUp.apply($options, arguments);\n    })\n  }, [$data.loading ? (_openBlock(), _createElementBlock(\"i\", _hoisted_17)) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" Sign Up \")], 10 /* CLASS, PROPS */, _hoisted_16), _createElementVNode(\"p\", _hoisted_18, [_hoisted_19, _createVNode(_component_router_link, {\n    to: \"/login\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_hoisted_20];\n    }),\n    _: 1 /* STABLE */\n  })])])])])])]);\n}","map":{"version":3,"mappings":";;;EACO,SAAM;AAAa;;EACb,SAAM;AAAgB;;EACxB,SAAM;AAAwB;;EAC5B,SAAM;AAAQ;;EACZ,SAAM;AAAuC;8BAChDA,oBAMI;EAND,SAAM,iCAAiC;EAACC,IAAI,EAAC;iBAC9CD,oBAIE;EAHA,SAAM,OAAO;EACbE,GAAG,EAAC,iFAAiF;EACrFD,IAAI,EAAC;;8BAGTD,oBAEK;EAFD,SAAM;AAA2C,GAAC,uBAEtD;8BACAA,oBAAM;;EAEJ,SAAM;AAAuH;;EAG3H,SAAM;AAAuH;;EAE3H,SAAM;AAA2B;;EAgBrC,SAAM;AAAuH;+BAE7HA,oBAGC;EAFC,SAAM;AAAuH,GAC5H,OAAK;;EAWR,SAAM;AAAuH;+BAE7HA,oBAGC;EAFC,SAAM;AAAuH,GAC5H,UAAQ;;;;EAoBR,SAAM;;;EAGR,SAAM;AAAa;+BACpBA,oBAEO;EAFD,SAAM;AAAe,GACxB,mCACH;+BAEEA,oBAEC;EAFE,SAAM,4CAA4C;EAACC,IAAI,EAAC;GAAI,UACtD;;;;;uBAtFvBE,oBA8FM,OA9FNC,UA8FM,GA7FJJ,oBA4FU,WA5FVK,UA4FU,GA3FRL,oBA0FM,OA1FNM,UA0FM,GAzFJN,oBAwFM,OAxFNO,UAwFM,GAvFJP,oBAsFM,OAtFNQ,UAsFM,GArFJC,UAMI,EACJC,UAEK,EACLC,UAAM,EACNX,oBAoBM,OApBNY,UAoBM,GAjBJZ,oBASQ,QATRa,WASQ,oBAPL,kCAAgC,uCAOlC,KAPkCC,WAOlC,mDALY;;GAGR,uBAGLd,oBAME;IALA,SAAM,4EAA4E;IAClFe,EAAE,EAAC,cAAc;IACjBC,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,cAAc;;aACjBC,UAAI;IAAA;iDAAJA,UAAI,OAGjBlB,oBAcM,OAdNmB,WAcM,GAXJC,WAGC,kBACDpB,oBAME;IALA,SAAM,4EAA4E;IAClFe,EAAE,EAAC,OAAO;IACVC,IAAI,EAAC,OAAO;IACZC,WAAW,EAAC,0BAA0B;;aAC7BC,WAAK;IAAA;iDAALA,WAAK,OAGlBlB,oBAcM,OAdNqB,WAcM,GAXJC,WAGC,kBACDtB,oBAME;IALA,SAAM,4EAA4E;IAClFe,EAAE,EAAC,UAAU;IACbC,IAAI,EAAC,UAAU;IACfC,WAAW,EAAC,UAAU;;aACbC,cAAQ;IAAA;iDAARA,cAAQ,OAGrBlB,oBAYS;IAXP,SAAKuB,iBAAC,8FAA8F,EAC3EL,UAAI,UAAUA,WAAK,UAAUA,cAAQ,WAAWA,aAAO;IAK/EM,QAAQ,GAAGN,UAAI,KAAKA,WAAK,KAAKA,cAAQ,IAAIA,aAAO;IACjDO,OAAK;MAAA,OAAEC,6DAAM;IAAA;MAEiCR,aAAO,kBAAtDf,oBAA4D,KAA5DwB,WAA4D,oEAE9D,yCACA3B,oBASI,KATJ4B,WASI,GARFC,WAEO,EACPC,aAIcC;IAJDC,EAAE,EAAC;EAAQ;wBACtB;MAAA,OAEC,CAFDC,WAEC","names":["_createElementVNode","href","src","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","id","type","placeholder","$data","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_normalizeClass","disabled","onClick","$options","_hoisted_17","_hoisted_18","_hoisted_19","_createVNode","_component_router_link","to","_hoisted_20"],"sourceRoot":"","sources":["/Users/kazuaki.aihara/Documents/fuelcrypto-organizer/src/views/SignupPage.vue"],"sourcesContent":["<template>\n  <div class=\"SignIn_page\">\n    <section class=\"relative pt-12\">\n      <div class=\"container px-4 mx-auto\">\n        <div class=\"h-full\">\n          <div class=\"relative max-w-xs mx-auto text-center\">\n            <a class=\"w-24 inline-block mx-auto mb-10\" href=\"#\">\n              <img\n                class=\"block\"\n                src=\"https://sociama-product-image.s3.ap-northeast-1.amazonaws.com/sociama_01@4x.png\"\n                href=\"https://social-marketing.io\"\n              />\n            </a>\n            <h2 class=\"text-2xl text-gray-500 font-semibold mb-2\">\n              Create your account\n            </h2>\n            <br />\n            <div\n              class=\"relative w-full h-14 py-4 px-3 mb-8 border border-gray-400 hover:border-blue focus-within:border-green-500 rounded-lg\"\n            >\n              <span\n                class=\"absolute bottom-full left-0 ml-3 -mb-1 transform translate-y-0.5 text-xs font-semibold text-gray-600 px-1 bg-gray-200\"\n                >Organization name / Project name<i\n                  class=\"pi pi-question-circle m-1\"\n                  v-tippy=\"{\n                    content:\n                      '当サービスを利用する団体名、プロジェクト名を入力してください',\n                  }\"\n                ></i\n              ></span>\n              <input\n                class=\"block w-full outline-none bg-transparent text-sm text-gray-600 font-medium\"\n                id=\"signUpInput1\"\n                type=\"text\"\n                placeholder=\"example inc.\"\n                v-model=\"name\"\n              />\n            </div>\n            <div\n              class=\"relative w-full h-14 py-4 px-3 mb-8 border border-gray-400 hover:border-blue focus-within:border-green-500 rounded-lg\"\n            >\n              <span\n                class=\"absolute bottom-full left-0 ml-3 -mb-1 transform translate-y-0.5 text-xs font-semibold text-gray-600 px-1 bg-gray-200\"\n                >Email</span\n              >\n              <input\n                class=\"block w-full outline-none bg-transparent text-sm text-gray-600 font-medium\"\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"mail-address@example.com\"\n                v-model=\"email\"\n              />\n            </div>\n            <div\n              class=\"relative w-full h-14 py-4 px-3 mb-6 border border-gray-400 hover:border-blue focus-within:border-green-500 rounded-lg\"\n            >\n              <span\n                class=\"absolute bottom-full left-0 ml-3 -mb-1 transform translate-y-0.5 text-xs font-semibold text-gray-600 px-1 bg-gray-200\"\n                >Password</span\n              >\n              <input\n                class=\"block w-full outline-none bg-transparent text-sm text-gray-600 font-medium\"\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"password\"\n                v-model=\"password\"\n              />\n            </div>\n            <button\n              class=\"block w-full py-4 mb-4 leading-6 text-white font-semibold rounded-lg transition duration-200\"\n              :class=\"\n                name != '' && email != '' && password != '' && !loading\n                  ? 'bg-blue-500 hover:bg-blue-600'\n                  : 'bg-gray-500 hover:bg-gray-600'\n              \"\n              :disabled=\"!name || !email || !password || loading\"\n              @click=\"signUp\"\n            >\n              <i class=\"pi pi-spin pi-spinner text-sm\" v-if=\"loading\"></i>\n              Sign Up\n            </button>\n            <p class=\"font-medium\">\n              <span class=\"text-gray-300\"\n                >Do you have any account already?\n              </span>\n              <router-link to=\"/login\">\n                <a class=\"inline-block text-blue-500 hover:underline\" href=\"#\">\n                  Sign in</a\n                >\n              </router-link>\n            </p>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport {\n  createUserWithEmailAndPassword,\n  getAuth,\n  sendEmailVerification,\n} from \"@firebase/auth\";\nimport api from \"../api/api.js\";\nimport store from \"@/store\";\nimport \"../firebase_config\";\n\nconst auth = getAuth();\n\nexport default {\n  data() {\n    return {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      loading: false,\n    };\n  },\n  methods: {\n    signUp: function () {\n      var user = null;\n      this.loading = true;\n      createUserWithEmailAndPassword(auth, this.email, this.password)\n        .then((userCredential) => {\n          user = userCredential.user;\n          // store.commit(\"updateUser\", user);\n          api\n            .createOrganizer({\n              name: this.name,\n              small_campaign_count: 0,\n              big_campaign_count: 0,\n            })\n            .then((organizer) => {\n              api\n                .createAccount({\n                  organizer_id: organizer.data.organizer_id,\n                  email: this.email,\n                })\n                .then(() => {\n                  sendEmailVerification(user, {\n                    url: \"http://social-marketing.io/login\",\n                  });\n                  store.commit(\"updateUser\", null);\n                  this.$router.replace(\"/sent-mail\");\n                })\n                .catch((error) => {\n                  this.$toast.show(\"アカウントの作成に失敗しました\", {\n                    type: \"error\",\n                    position: \"top-right\",\n                    duration: 5000,\n                  });\n                  store.commit(\"updateUser\", null);\n                  console.log(error);\n                });\n              this.loading = false;\n            })\n            .catch((error) => {\n              this.$toast.show(\"組織の作成に失敗しました\", {\n                type: \"error\",\n                position: \"top-right\",\n                duration: 5000,\n              });\n              store.commit(\"updateUser\", null);\n              console.log(error);\n              this.loading = false;\n            });\n        })\n        .catch((error) => {\n          switch (error.code) {\n            case \"auth/email-already-in-use\":\n              this.$toast.show(\"このアドレスは既に登録済です\", {\n                type: \"error\",\n                position: \"top-right\",\n                duration: 5000,\n              });\n              break;\n            case \"auth/invalid-email\":\n              this.$toast.show(\"アドレスのフォーマットが正しくありません\", {\n                type: \"error\",\n                position: \"top-right\",\n                duration: 5000,\n              });\n              break;\n            default:\n              this.$toast.show(\"エラーが発生しました\", {\n                type: \"error\",\n                position: \"top-right\",\n                duration: 5000,\n              });\n              console.log(error.code + \": \" + error.message);\n          }\n          this.loading = false;\n        });\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}