{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kazuaki.aihara/Documents/hanabi-admin/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/kazuaki.aihara/Documents/hanabi-admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport api from \"@/api/api.js\";\n// import store from \"@/store\";\n// import { createHash } from \"crypto\";\n\nexport default {\n  data: function data() {\n    return {\n      username: \"\",\n      password: \"\",\n      loading: false\n    };\n  },\n  computed: {\n    user_id: function user_id() {\n      return this.$store.getters[\"userId\"];\n    },\n    token: function token() {\n      return this.$store.getters[\"authToken\"];\n    }\n  },\n  methods: {\n    signIn: function () {\n      var _signIn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this = this;\n        var SHA256, pw_token;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              SHA256 = require(\"crypto-js/sha256\");\n              pw_token = SHA256(this.password);\n              _context.next = 4;\n              return api.login({\n                name: this.username,\n                password: pw_token.toString()\n              }).then(function (response) {\n                console.log(response);\n                // var SHA256 = require(\"crypto-js/sha256\");\n                var token = SHA256(_this.password + response);\n                // const hash = createHash(\"sha256\");\n                // hash.update(this.password);\n                // hash.update(response);\n                // const token = hash.digest(\"hex\");\n                console.log(token.toString());\n              })[\"catch\"](function (error) {\n                _this.$toast.show(\"EmailかPasswordが間違っています\", {\n                  type: \"error\",\n                  position: \"top-right\",\n                  duration: 5000\n                });\n                _this.loading = false;\n                console.log(error.code + \" \" + error.message);\n              });\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function signIn() {\n        return _signIn.apply(this, arguments);\n      }\n      return signIn;\n    }(),\n    refresh_error: function refresh_error() {\n      this.error_message = \"\";\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;AAoEA,OAAOA,GAAE,MAAO,cAAc;AAC9B;AACA;;AAEA,eAAe;EACbC,IAAI,kBAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,OAAO,qBAAG;MACR,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,QAAQ,CAAC;IACtC,CAAC;IACDC,KAAK,mBAAG;MACN,OAAO,IAAI,CAACF,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC;IACzC;EACF,CAAC;EACDE,OAAO,EAAE;IACPC,MAAM;MAAA,yEAAE;QAAA;QAAA;QAAA;UAAA;YAAA;cACFC,MAAK,GAAIC,OAAO,CAAC,kBAAkB,CAAC;cAClCC,QAAO,GAAIF,MAAM,CAAC,IAAI,CAACT,QAAQ,CAAC;cAAA;cAAA,OAChCH,GAAE,CACLe,KAAK,CAAC;gBACLC,IAAI,EAAE,IAAI,CAACd,QAAQ;gBACnBC,QAAQ,EAAEW,QAAQ,CAACG,QAAQ;cAC7B,CAAC,EACAC,IAAI,CAAC,UAACC,QAAQ,EAAK;gBAClBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;gBACrB;gBACA,IAAMV,KAAI,GAAIG,MAAM,CAAC,KAAI,CAACT,QAAO,GAAIgB,QAAQ,CAAC;gBAC9C;gBACA;gBACA;gBACA;gBACAC,OAAO,CAACC,GAAG,CAACZ,KAAK,CAACQ,QAAQ,EAAE,CAAC;cAC/B,CAAC,UACK,CAAC,UAACK,KAAK,EAAK;gBAChB,KAAI,CAACC,MAAM,CAACC,IAAI,CAAC,wBAAwB,EAAE;kBACzCC,IAAI,EAAE,OAAO;kBACbC,QAAQ,EAAE,WAAW;kBACrBC,QAAQ,EAAE;gBACZ,CAAC,CAAC;gBACF,KAAI,CAACvB,OAAM,GAAI,KAAK;gBACpBgB,OAAO,CAACC,GAAG,CAACC,KAAK,CAACM,IAAG,GAAI,GAAE,GAAIN,KAAK,CAACO,OAAO,CAAC;cAC/C,CAAC,CAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA,CACL;MAAA;QAAA;MAAA;MAAA;IAAA;IACDC,aAAa,EAAE,yBAAY;MACzB,IAAI,CAACC,aAAY,GAAI,EAAE;IACzB;EACF;AACF,CAAC","names":["api","data","username","password","loading","computed","user_id","$store","getters","token","methods","signIn","SHA256","require","pw_token","login","name","toString","then","response","console","log","error","$toast","show","type","position","duration","code","message","refresh_error","error_message"],"sourceRoot":"","sources":["/Users/kazuaki.aihara/Documents/hanabi-admin/src/views/LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"login_page\">\n    <section class=\"relative pt-24\">\n      <div class=\"container px-4 mx-auto\">\n        <div class=\"h-full\">\n          <div class=\"relative max-w-xs mx-auto text-center\">\n            <a\n              class=\"w-24 inline-block mx-auto mb-10\"\n              href=\"https://social-marketing.io\"\n            >\n              <img class=\"block\" src=\"../assets/icon.jpg\" />\n            </a>\n            <h2 class=\"text-2xl text-gray-500 font-semibold mb-2\"></h2>\n            <p class=\"text-gray-400 font-medium mb-10\">\n              Welcome back! Please enter your account.\n            </p>\n            <form action=\"\">\n              <div\n                class=\"relative w-full h-14 py-4 px-3 mb-8 border border-gray-400 hover:border-blue focus-within:border-green-500 rounded-lg\"\n              >\n                <span\n                  class=\"absolute bottom-full left-0 ml-3 -mb-1 transform translate-y-0.5 text-xs font-semibold text-gray-600 px-1 bg-gray-200\"\n                  >username</span\n                >\n                <input\n                  class=\"block w-full outline-none text-sm text-gray-600 font-medium\"\n                  type=\"text\"\n                  placeholder=\"hanabi\"\n                  v-model=\"username\"\n                />\n              </div>\n              <div\n                class=\"relative w-full h-14 py-4 px-3 mb-3 border border-gray-400 hover:border-blue focus-within:border-green-500 rounded-lg\"\n              >\n                <span\n                  class=\"absolute bottom-full left-0 ml-3 -mb-1 transform translate-y-0.5 text-xs font-semibold text-gray-600 px-1 bg-gray-200\"\n                  >Password</span\n                >\n                <input\n                  class=\"block w-full outline-none bg-transparent text-sm text-gray-600 font-medium\"\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"password\"\n                  v-model=\"password\"\n                />\n              </div>\n            </form>\n            <button\n              class=\"mt-6 block w-full py-4 mb-4 leading-6 text-white font-semibold rounded-lg transition duration-200\"\n              :class=\"\n                username != '' && this.password != '' && !loading\n                  ? 'bg-blue-500 hover:bg-blue-600'\n                  : 'bg-gray-500 hover:bg-gray-600'\n              \"\n              :disabled=\"!username || !password || loading\"\n              @click=\"signIn\"\n            >\n              <i class=\"pi pi-spin pi-spinner text-sm\" v-if=\"loading\"></i>\n              Sign In\n            </button>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport api from \"@/api/api.js\";\n// import store from \"@/store\";\n// import { createHash } from \"crypto\";\n\nexport default {\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      loading: false,\n    };\n  },\n  computed: {\n    user_id() {\n      return this.$store.getters[\"userId\"];\n    },\n    token() {\n      return this.$store.getters[\"authToken\"];\n    },\n  },\n  methods: {\n    signIn: async function () {\n      var SHA256 = require(\"crypto-js/sha256\");\n      const pw_token = SHA256(this.password);\n      await api\n        .login({\n          name: this.username,\n          password: pw_token.toString(),\n        })\n        .then((response) => {\n          console.log(response);\n          // var SHA256 = require(\"crypto-js/sha256\");\n          const token = SHA256(this.password + response);\n          // const hash = createHash(\"sha256\");\n          // hash.update(this.password);\n          // hash.update(response);\n          // const token = hash.digest(\"hex\");\n          console.log(token.toString());\n        })\n        .catch((error) => {\n          this.$toast.show(\"EmailかPasswordが間違っています\", {\n            type: \"error\",\n            position: \"top-right\",\n            duration: 5000,\n          });\n          this.loading = false;\n          console.log(error.code + \" \" + error.message);\n        });\n    },\n    refresh_error: function () {\n      this.error_message = \"\";\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}